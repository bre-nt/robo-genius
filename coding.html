<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Robo Genius — Coding</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <div class="header">
    <div class="brand"><img src="https://cdn-icons-png.flaticon.com/512/4712/4712025.png"><h1>Coding Lab</h1></div>
    <div class="top-actions"><button class="btn ghost" onclick="nav('index.html')">Home</button></div>
  </div>
  <nav class="main-nav container">
    <a href="index.html">Home</a>
    <a href="robotics.html">Robotics</a>
    <a href="coding.html" class="active">Coding</a>
    <a href="community.html">Community</a>
  </nav>

  <main class="container">
    <div class="card">
      <h2>Live Web Runner</h2>
      <div class="small">Edit HTML, CSS and JS then press Run to see results.</div>
      <textarea id="webHTML" class="code" style="height:120px"><h1>Hello Robo Genius</h1><div id="out">Edit and press Run</div></textarea>
      <textarea id="webCSS" class="code" style="height:80px;margin-top:8px">body{font-family:Inter,Arial;margin:10px}</textarea>
      <textarea id="webJS" class="code" style="height:80px;margin-top:8px">// JS here</textarea>
      <div style="margin-top:8px;display:flex;gap:8px"><button class="btn" onclick="runWeb()">Run</button><button class="btn ghost" onclick="downloadHTML()">Download HTML</button></div>
      <iframe id="webFrame" style="margin-top:10px;width:100%;height:260px;border-radius:8px;border:1px solid rgba(255,255,255,0.03)"></iframe>
    </div>

    <div style="margin-top:12px" class="card">
      <h3>JS Practice</h3>
      <div class="small">Write a function `square(n)` that returns n*n. Test below.</div>
      <textarea id="jsPractice" class="code" style="height:100px">function square(n){ return n*n; }</textarea>
      <div style="margin-top:8px;display:flex;gap:8px"><input id="jsTestInput" class="input" placeholder="Number"><button class="btn" onclick="testJS()">Test</button></div>
      <div id="jsTestResult" class="small" style="margin-top:8px"></div>
    </div>
  </main>

  <footer class="footer">© Robo Genius</footer>

  <script src="app.js"></script>
  <script>
    if('serviceWorker' in navigator) navigator.serviceWorker.register('sw.js').catch(()=>{});
    function nav(h){ location.href=h; }
    function runWeb(){
      const html = document.getElementById('webHTML').value;
      const css = document.getElementById('webCSS').value;
      const js = document.getElementById('webJS').value;
      const frame = document.getElementById('webFrame'), doc = frame.contentDocument || frame.contentWindow.document;
      doc.open();
      doc.write(`<!doctype html><html><head><meta charset="utf-8"><style>${css}</style></head><body>${html}<script>${js}<\/script></body></html>`);
      doc.close();
    }
    function downloadHTML(){ const html = document.getElementById('webHTML').value; const css = document.getElementById('webCSS').value; const js = document.getElementById('webJS').value; const full = `<!doctype html><html><head><meta charset="utf-8"><style>${css}</style></head><body>${html}<script>${js}<\/script></body></html>`; const blob = new Blob([full],{type:'text/html'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='page.html'; a.click(); }
    function testJS(){ try{ const code = document.getElementById('jsPractice').value; const n = Number(document.getElementById('jsTestInput').value||0); const f = new Function(code + '\n return square(' + n + ');'); const res = f(); document.getElementById('jsTestResult').textContent = 'Result: ' + res; }catch(e){ document.getElementById('jsTestResult').textContent = 'Error: '+e.message; } }
  </script>
</body>
</html>
